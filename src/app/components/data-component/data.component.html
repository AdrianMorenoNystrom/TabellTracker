<div *ngIf="loading">
  <p>Laddar statistik‚Ä¶</p>
</div>

<div *ngIf="!loading">

  <!-- Senaste 4-l√§ggaren -->
  <mat-card class="data-card" *ngIf="lastFourPicker">
    <mat-card-header>
      <mat-card-title>Senaste 4-l√§ggaren</mat-card-title>
      <mat-card-subtitle>
        Omg√•ng {{ lastFourPicker.roundNumber }} ‚Ä¢ Vecka {{ lastFourPicker.week }}
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <p>
        <strong>{{ lastFourPicker.playerName }}</strong> la 4 matcher och fick
        <strong>{{ lastFourPicker.score }}/{{ lastFourPicker.matchesPicked }}</strong>
        r√§tt.
      </p>
      <p>
        Omg√•ngens totalsumma:
        <strong>{{ lastFourPicker.totalScore }}</strong> r√§tt.
      </p>
    </mat-card-content>
  </mat-card>

  <mat-card class="data-card" *ngIf="!lastFourPicker">
    <mat-card-header>
      <mat-card-title>Senaste 4-l√§ggaren</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <p>Ingen runda med 4 matcher registrerad √§nnu.</p>
    </mat-card-content>
  </mat-card>

  <!-- Per-spelare-kort -->
  <mat-card
    class="data-card player-card"
    *ngFor="let s of playerStats"
  >
    <mat-card-header>
      <mat-card-title>{{ s.player.name }}</mat-card-title>
      <mat-card-subtitle>
        Totalt: {{ s.player.score }} r√§tt p√• {{ s.player.total_matches }} matcher
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <div class="badges" *ngIf="s.isFormKing || s.isFullPotKing">
        <span class="badge" *ngIf="s.isFormKing">üî• Formstarkast</span>
        <span class="badge" *ngIf="s.isFullPotKing">‚≠ê Flest fullpott</span>
      </div>

      <div class="stats-grid">
        <div class="stat">
          <div class="label">Snitt / omg√•ng</div>
          <div class="value">
            {{ s.player.avg_score_per_round | number:'1.1-2' }}
          </div>
        </div>

        <div class="stat">
          <div class="label">Senaste 5 omg</div>
          <div class="value">
            {{ s.last5Avg | number:'1.1-2' }}
          </div>
        </div>

        <div class="stat">
          <div class="label">Full pott</div>
          <div class="value">
            {{ s.fullPotsTotal }} st
          </div>
          <div class="sub">
            ({{ s.fullPots3 }}√ó3/3 & {{ s.fullPots4 }}√ó4/4)
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

</div>
